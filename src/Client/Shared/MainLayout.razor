@using MudBlazor
@using WirsolutViajes.Client.Settings
@inherits LayoutComponentBase

<MudThemeProvider Theme="_currentTheme" />
<MudDialogProvider />
<MudSnackbarProvider />


<MudLayout>
    <MudAppBar Elevation="25">
        <MudHidden Breakpoint="Breakpoint.Md">
            <MudText Typo="Typo.h6" Class="ml-4">Wirsolut Viajes</MudText>
        </MudHidden>
        <MudToolBar DisableGutters="true">
            <MudIconButton Icon="@Icons.Material.Outlined.Menu" Color="Color.Inherit" OnClick="@((e) => DrawerToggle())" Class="ml-3" />
        </MudToolBar>
        <MudHidden Breakpoint="Breakpoint.Md">
            <MudChip Label="true" Color="Color.Secondary" Class="text-center">
                <MudText Typo="Typo.h6" Class="ml-0">0123</MudText>
            </MudChip>
            <MudText Typo="Typo.h6" Class="ml-4">Juan Torres</MudText>
        </MudHidden>
        <MudSpacer />

        <MudHidden Breakpoint="Breakpoint.MdAndUp" Invert="true">
            <MudDivider Vertical="true" FlexItem="true" DividerType="DividerType.Middle" Class="mx-4 my-5" />
            <MudTooltip Text="Toggle Dark Mode">
                <MudIconButton Icon="@Icons.Material.Filled.Brightness4" Color="Color.Inherit" OnClick="@((e) => DrawerToggle())" />
            </MudTooltip>
        </MudHidden>


@*         <MudHidden Breakpoint="Breakpoint.SmAndDown" Invert="true">
            <MudMenu Icon="@Icons.Material.Filled.Settings" Color="Color.Inherit" Dense="true" >
                <div class="px-2">
                    <MudIconButton Icon="@Icons.Material.Filled.Brightness4" Color="Color.Inherit" OnClick="@((e) => DrawerToggle())" />
                    <MudIconButton Icon="@Icons.Custom.Brands.GitHub" Color="Color.Inherit" Link="https://github.com/Agencia/CleanArchitecture" Target="_blank" />
                </div>
                <MudText Typo="Typo.body2" Class="px-4 py-2"><b>_localizer["Community"]</b></MudText>
                <MudMenuItem Link="https://www.facebook.com/codewithmukesh" Target="_blank">_localizer["Facebook Page"]</MudMenuItem>
            </MudMenu>
        </MudHidden> *@

    </MudAppBar>


    <MudDrawer @bind-Open="_drawerOpen" Elevation="25" ClipMode="DrawerClipMode.Always" Breakpoint="Breakpoint.Lg">
        <NavMenu />
    </MudDrawer>

    <MudMainContent>
        <MudContainer MaxWidth="MaxWidth.False" Class="mt-4">
            @Body
        </MudContainer>
    </MudMainContent>


</MudLayout>


@code {
    // <MudLayout>
    //     <MudMainContent>
    //         @*       <MudContainer MaxWidth="MaxWidth.False" Class="my-1 pt-1 mt-4">
    //         @Body
    //         </MudContainer> *@
    //         <ErrorBoundary>
    //             <ChildContent>
    //                 <MudContainer MaxWidth="MaxWidth.False" Class="my-1 pt-1 mt-4">
    //                     @Body
    //                 </MudContainer>
    //             </ChildContent>
    //             <ErrorContent Context="Exeption">
    //                 <div class="pa-10">
    //                     <MudAlert Severity="Severity.Error" Variant="Variant.Outlined">@Exeption.GetType() <br /> @Exeption.Message</MudAlert>
    //                 </div>
    //             </ErrorContent>
    //         </ErrorBoundary>
    //     </MudMainContent>
    // </MudLayout>


    bool _drawerOpen = true;

    void DrawerToggle()
    {
        _drawerOpen = !_drawerOpen;
    }

    private MudTheme _currentTheme;


    protected override async Task OnInitializedAsync()
    {
        _currentTheme = Theme.DefaultTheme;
    }
}

